<!DOCTYPE html>
<html lang="en">

<head>
   <!-- <meta charset="UTF-8"> -->
   <title>House Detection</title>
   <link rel="stylesheet" href="/static/styles.css">
   <!-- Include Chart.js for bar graph -->
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
   <h1>House Detection System</h1>

   <!-- MAP SECTION -->
   <div class="mapUi">
      <div id="mapContainer"></div>
      <div class="controls">
         <div>
            <label for="latLon">Latitude,Longitude:</label>
            <input type="text" id="latLon" placeholder="e.g. 24.642248, 94.098629">
         </div>
         <div>
            <label for="radius">Radius (km):</label>
            <input type="text" id="radius" placeholder="e.g. 1">
         </div>
         <div>
            <label for="zoom">Zoom:</label>
            <input type="text" id="zoom" placeholder="e.g. 15">
         </div>
         <div>
            <label for="scale">Scale:</label>
            <input type="text" id="scale" placeholder="e.g. 2">
         </div>
      </div>
   </div>

   <div class="container">
      <div class="input-group">
         <div class="param-group">
            <button onclick="getMap()">Get Map</button>
         </div>
         <div class="param-group">
            <button onclick="addMapImage()">Add Image</button>
         </div>
      </div>
   </div>

   <!-- LIST OF ADDED IMAGES -->
   <div class="container">
      <h2>List of Added Images</h2>
      <ul id="imageListUI"></ul>
   </div>

   <!-- DIRECT UPLOAD SECTION -->
   <div class="container">
      <h2>Or Upload Your Own Images</h2>
      <input type="file" id="imageUpload" accept="image/*">
      <input type="file" id="imageUploadMultiple" accept="image/*" multiple>
   </div>

   <!-- DETECTION SETTINGS & ACTION -->
   <div class="container">
      <div class="input-group">
         <div class="param-group">
            <label for="confInput">Confidence:</label>
            <input type="number" id="confInput" value="0.4" step="0.1" min="0" max="1">
         </div>

         <div class="param-group">
            <label for="iouInput">IoU:</label>
            <input type="number" id="iouInput" value="0.35" step="0.1" min="0" max="1">
         </div>

         <div class="param-group">
            <label for="imgszInput">Image Size:</label>
            <input type="number" id="imgszInput" value="640">
         </div>

         <div class="param-group">
            <label for="drawLabelInput">Draw Label:</label>
            <input type="checkbox" id="drawLabelInput" checked>
         </div>
      </div>
      <div class="input-group">
         <div class="param-group">
            <button onclick="uploadImage()">Detect House (Single Upload)</button>
         </div>
         <div class="param-group">
            <button onclick="uploadMultipleImages()">Detect Houses (Multiple Upload)</button>
         </div>
         <div class="param-group">
            <button onclick="runDetectionOnAllImages()">Detect Houses (Maps Multiple)</button>
         </div>
      </div>
      <div id="result"></div>
   </div>

   <!-- RESULTS & GRAPH -->
   <div class="container">
      <h2>Detection Results</h2>
      <h3>House Detection Chart</h3>
      <canvas id="myChart" width="400" height="200"></canvas>

      <h3>House Detected with annotated</h3>
      <!-- We'll populate results dynamically here -->
      <div id="resultsContainer"></div>
   </div>

   <!-- Google Maps API (update API key as needed) -->
   <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfB6DQNL8WrYegbR0Xga_T2JfXEovWGME&callback=initMap">
      </script>
   <script src="/static/script.js"></script>
</body>

</html>